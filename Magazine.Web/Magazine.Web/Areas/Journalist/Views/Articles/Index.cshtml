@using MagazineApp.Web.Models.ArticlesViewModels;
@model ArticlesListViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Articles</h2>

<div class="container articles-container">
    @if (Model.Articles != null && Model.Articles.Count() > 0) {
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th>Caption</th>
                    <th>Short Text</th>
                    <th>Create Date</th>
                    <th>Author</th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach(var article in Model.Articles) {
                    <tr>
                        <td>
                            <img src="@(article.MainPicture != null ? String.Format("data:image/gif;base64,{0}", Convert.ToBase64String(article.MainPicture)) : "#")" class="file-preview-image" title="@article.Caption">
                        </td>
                        <td>@article.Caption</td>
                        <td>@article.ShortText</td>
                        <td>@article.CreateDate.ToString("dd.MM.yyyy")</td>
                        <td>@($"{article.Author.Name} {article.Author.Surname}")</td>
                        <td><a href="@Url.Action("Details", "Articles", new { id = article.Id })" class="btn btn-default">Details</a></td>
                        <td><a href="@Url.Action("Edit", "Articles", new { id = article.Id })" class="btn btn-default">Edit</a></td>
                        <td>
                            <a href="@Url.Action("Delete", "Articles", new { id = article.Id })" class="btn btn-default">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else {
        <p>There are no articles</p>
    }

    <a href="@Url.Action("Create", "Articles")" class="btn btn-default pull-right">Add</a>

</div>

